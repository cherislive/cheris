!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["vue-snb-table"]=e():t["vue-snb-table"]=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=16)}({0:function(t,e,n){"use strict";function o(t,e,n,o,i,r,s,a){var l=typeof(t=t||{}).default;"object"!==l&&"function"!==l||(t=t.default);var u,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=n,d._compiled=!0),o&&(d.functional=!0),r&&(d._scopeId=r),s?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},d._ssrRegister=u):i&&(u=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(d.functional){d._injectStyles=u;var c=d.render;d.render=function(t,e){return u.call(e),c(t,e)}}else{var h=d.beforeCreate;d.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:d}}n.d(e,"a",function(){return o})},1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(13),r=(o=i)&&o.__esModule?o:{default:o};e.default={name:"snb-table",components:{TableContent:r.default},props:{data:{type:Array,default:function(){return[]}},defaultSort:{type:Object,default:function(){}},sortState:{type:Object,default:function(){}},headerFixed:{type:Object,default:function(){}},headerColsWidth:{type:Array,default:function(){return[]}},showHeader:{type:Boolean,default:!0}},data:function(){return{hasFixedCell:!1,tableWrapperWidth:0,colsWidth:[],sort:{prop:"",order:"",defaultProp:""},rows:[],panes:[],distanX:0}},computed:{leftColumnWidth:function(){return this.colsWidth.length&&1*this.colsWidth[0]||0},inHeaderFixed:function(){return(this.headerFixed||{}).state},fixedTopStyle:function(){var t={};return this.inHeaderFixed&&(t.position="fixed",t.left=0,t.top=(this.headerFixed.top||0)+"px",t.zIndex=20),t}},created:function(){this.sort.prop=this.defaultSort?this.defaultSort.prop:"",this.sort.order=this.defaultSort?this.defaultSort.order:"",this.sort.defaultProp=this.defaultSort?this.defaultSort.prop:""},mounted:function(){this.calcPaneInstances(),this.mapDataToRows(),this.headerColsWidth&&this.headerColsWidth.length&&this.emitColsWidth()},methods:{calcPaneInstances:function(){var t=this;if(this.$slots.default){var e=this.$slots.default.filter(function(t){return t.tag&&t.componentOptions&&("snb-table-column"===t.componentOptions.Ctor.options.name||"SnbTableColumn"===t.componentOptions.tag)}).map(function(t){return t.componentInstance});!(e.length===this.panes.length&&e.every(function(e,n){return e===t.panes[n]}))&&this.reductionColumns(e)}else 0!==this.panes.length&&this.reductionColumns()},reductionColumns:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[],n=null;t&&t.length&&(t.map(function(t){t.fixed&&!n?n=t||{}:e.push(t)}),n&&e.unshift(n)),this.panes=e,this.$emit("columnsReady",e),this.hasFixedCell=!!n},mapDataToRows:function(){var t=this.data,e=0;this.rows=t.map(function(t){return t.__vue_item_id=e++,t})},handleHeadSortClick:function(t){this.sort.prop!==t.prop?(this.sort.prop=t.prop,this.sort.order="asc"):this.sort.order=this.sort.order||"asc",this.$emit("sortChange",this.sort,t)},setColsWidth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.colsWidth=t,this.emitColsWidth()},emitColsWidth:function(){var t=this.colsWidth;if(t&&t.length){var e=this.headerColsWidth;if(e&&e.length){var n=[];t.map(function(o,i){n[i]=Math.max(e[i]||0,t[i]||0)}),this.colsWidth=n,this.$emit("colsWidth",n),this.translateChange(this.distanX)}else this.$emit("colsWidth",t)}},translateChange:function(t){this.distanX=t,this.$emit("distanXChange",t)},rowClick:function(t){this.$emit("rowClick",t)}},watch:{data:function(){this.mapDataToRows()},sortState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sort.order=t.order||this.defaultSort.order||""},headerColsWidth:function(){this.emitColsWidth()}}}},10:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-snb-table"},[n("div",{staticClass:"table-fixed"},[t.showHeader&&(t.hasFixedCell||t.inHeaderFixed)?n("table-content",{staticClass:"table-fixed-top",class:{"in-fixed-header":t.inHeaderFixed},style:t.fixedTopStyle,attrs:{contentType:"header",panes:t.panes,sort:t.sort,colsWidth:t.colsWidth,distanX:t.distanX,rows:t.rows},on:{handleHeadSortClick:t.handleHeadSortClick,translateChange:t.translateChange}}):t._e(),t._v(" "),t.hasFixedCell?n("table-content",{staticClass:"table-fixed-left",class:{"in-fixed-table":Math.abs(t.distanX)>5},style:{width:t.leftColumnWidth+"px"},attrs:{contentType:"leftFixed",showHeader:t.showHeader,panes:t.panes,sort:t.sort,colsWidth:t.colsWidth,distanX:t.distanX,rows:t.rows},on:{handleHeadSortClick:t.handleHeadSortClick,translateChange:t.translateChange,rowClick:t.rowClick}}):t._e()],1),t._v(" "),n("table-content",{attrs:{contentType:"body",showHeader:t.showHeader,panes:t.panes,sort:t.sort,colsWidth:t.colsWidth,distanX:t.distanX,rows:t.rows},on:{handleHeadSortClick:t.handleHeadSortClick,colsWidth:t.setColsWidth,translateChange:t.translateChange,rowClick:t.rowClick}}),t._v(" "),n("div",{staticClass:"hidden-columns"},[t._t("default")],2)],1)},i=[]},11:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});var o=function(){var t=this.$createElement;this._self._c;return this._e()},i=[]},12:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-snb-table"},[n("div",{staticClass:"table-fixed"},[n("table-content",{staticClass:"table-top",attrs:{contentType:"header",panes:t.columns,sort:t.sort,colsWidth:t.colsWidth,distanX:t.distanX},on:{headerColsWidth:t.setHeaderColsWidth,handleHeadSortClick:t.handleHeadSortClick}}),t._v(" "),t.hasFixedCell?n("table-content",{staticClass:"table-fixed-left",style:{width:t.leftColumnWidth+"px"},attrs:{contentType:"leftFixed",showHeader:!0,panes:t.columns,sort:t.sort,colsWidth:t.colsWidth,distanX:t.distanX},on:{handleHeadSortClick:t.handleHeadSortClick}}):t._e()],1)])},i=[]},13:function(t,e,n){"use strict";n.r(e);var o=n(2),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);var s=n(9),a=n(0);var l=function(t){n(225)},u=Object(a.a)(i.a,s.a,s.b,!1,l,null,null);e.default=u.exports},16:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SnbTableHeader=e.SnbTableColumn=e.SnbTable=void 0;var o=s(n(17)),i=s(n(21)),r=s(n(22));function s(t){return t&&t.__esModule?t:{default:t}}e.SnbTable=o.default,e.SnbTableColumn=i.default,e.SnbTableHeader=r.default},17:function(t,e,n){"use strict";n.r(e);var o=n(1),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);var s=n(10),a=n(0);var l=function(t){n(220)},u=Object(a.a)(i.a,s.a,s.b,!1,l,null,null);e.default=u.exports},18:function(t,e,n){"use strict";n.r(e);var o=n(3),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);var s=n(7),a=n(0);var l=function(t){n(227)},u=Object(a.a)(i.a,s.a,s.b,!1,l,null,null);e.default=u.exports},19:function(t,e,n){"use strict";n.r(e);var o=n(4),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);var s=n(8),a=n(0),l=Object(a.a)(i.a,s.a,s.b,!1,null,null,null);e.default=l.exports},2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(18)),i=r(n(19));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"snb-table-thead",components:{TableColumnHeader:o.default,TableRow:i.default},props:{contentType:{type:String,default:""},showHeader:{type:Boolean,default:!0},panes:{type:Array,default:function(){return[]}},rows:{type:Array,default:function(){return[]}},sort:{type:Object,default:function(){}},colsWidth:{type:Array,default:function(){return[]}},distanX:{type:Number,default:0}},data:function(){return{tableContnt:null,tableWrapperWidth:0,leftColumnWidth:0,direction:null,isAnimation:!1,start:{x:null,y:null},end:{x:null,y:null},distan:{x:0,y:0}}},computed:{tableWidth:function(){if(!this.colsWidth.length)return Math.ceil(this.tableWrapperWidth);var t=0;return this.colsWidth.map(function(e){t+=1*e}),t=t?t+1:t,Math.ceil(Math.max(t,this.tableWrapperWidth))},overflowWidth:function(){return Math.ceil(Math.max(this.tableWidth-this.tableWrapperWidth,0))},isScrollTable:function(){return this.tableWidth<=this.tableWrapperWidth}},created:function(){},mounted:function(){this.tableContnt=this.$refs.tableContnt,this.setTableWrapperWidth(),this.getHeaderCellsWidth()},methods:{setTableWrapperWidth:function(){var t=this;this.$nextTick(function(){t.tableWrapperWidth=t.$refs.tableWrapper&&t.$refs.tableWrapper.offsetWidth||0})},setCellElWidth:function(t){this.leftColumnWidth=1*t},setColsWidth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"body"===this.contentType&&this.$emit("colsWidth",t)},getHeaderCellsWidth:function(){var t=this;this.$refs.tableTheaderWrapper&&this.$nextTick(function(){for(var e=[],n=t.$refs.tableTheaderWrapper.querySelectorAll(".table-column"),o=0;o<n.length;o++)e.push(n[o].offsetWidth);t.$emit("headerColsWidth",e)})},handleHeadSortClick:function(t){this.$emit("handleHeadSortClick",t)},setTableDistanX:function(){"leftFixed"!==this.contentType&&(this.tableContnt.style.transform="translateX("+this.distanX+"px)",this.tableContnt.style.transition="none")},mousedownHandle:function(t){this.startHandle(t)},mousemoveHandle:function(t){this.moveHandle(t)},mouseupHandle:function(t){this.endHandle(t)},touchStartHandle:function(t){var e=t.touches[0];this.startHandle(e)},touchMoveHandle:function(t){var e=t.touches[0];this.moveHandle(e)},touchEndHandle:function(t){var e=t.changedTouches[0];this.endHandle(e)},onTransitionEnd:function(){this.isAnimation=!1},startHandle:function(t){"body"===this.contentType&&(this.isAnimation=!0,this.start.x=t.pageX,this.start.y=t.pageY)},moveHandle:function(t){if("body"===this.contentType&&this.isAnimation&&(this.end.x=t.pageX,this.end.y=t.pageY,this.getTouchDirection(this.end.x-this.start.x,this.end.y-this.start.y),this.direction)){var e=this.end.x-this.start.x;e=Math.min(this.distan.x+e,0),e=Math.max(-1*this.overflowWidth,e),this.$emit("translateChange",e,this.contentType)}},endHandle:function(t){if("body"===this.contentType){this.isAnimation=!1,this.end.x=t.pageX;var e=this.distan.x+(this.end.x-this.start.x);e=Math.min(e,0),e=Math.max(-1*this.overflowWidth,e),this.distan.x=e}},getAngle:function(t,e){return 180*Math.atan2(e,t)/Math.PI},getTouchDirection:function(t,e){if(Math.abs(t)>5){var n=this.getAngle(t,e);n>=-45&&n<=45?this.direction="right":(n>=135&&n<=180||n>=-180&&n<-135)&&(this.direction="left")}else this.direction=null},rowClick:function(t){this.$emit("rowClick",t)}},watch:{distanX:function(){this.setTableDistanX()}}}},20:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={functional:!0,props:["column","row","colspan"],render:function(t,e){var n=e.props,o=n.column,i={class:"cell"};return o.$scopedSlots.default?t("div",i,o.$scopedSlots.default(n.row)):(i.domProps={},i.domProps.innerHTML=n.column.formatter(n.row[o.prop],n.row.data),t("div",i))}}},21:function(t,e,n){"use strict";n.r(e);var o=n(5),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);var s=n(11),a=n(0),l=Object(a.a)(i.a,s.a,s.b,!1,null,null,null);e.default=l.exports},22:function(t,e,n){"use strict";n.r(e);var o=n(6),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);var s=n(12),a=n(0);var l=function(t){n(229)},u=Object(a.a)(i.a,s.a,s.b,!1,l,null,null);e.default=u.exports},220:function(t,e){},225:function(t,e){},227:function(t,e){},229:function(t,e){},3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"snb-table-column-header",props:{column:{type:Object,default:function(){}},sort:{type:Object,default:function(){}}},data:function(){return{}},computed:{isSortCell:function(){return!!this.sort&&(this.column.sortable||this.sort.prop===this.column.prop||this.sort.defaultProp===this.column.prop)},isAscending:function(){return this.sort&&this.sort.prop===this.column.prop&&"asc"===this.sort.order},isDescending:function(){return this.sort&&this.sort.prop===this.column.prop&&"desc"===this.sort.order}},created:function(){},mounted:function(){},methods:{handleClick:function(){this.isSortCell&&this.$emit("handleHeadSortClick",this.column)}}}},4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(20),r=(o=i)&&o.__esModule?o:{default:o};e.default={name:"snb-table-row",components:{TableCell:r.default},props:{columns:{type:Array,default:function(){return[]}},row:{type:Object,default:function(){}},isLastRow:{type:Boolean,default:!1}},data:function(){return{}},computed:{},created:function(){},mounted:function(){this.getCellsWidth()},methods:{getCellsWidth:function(){var t=this;this.isLastRow&&this.$nextTick(function(){for(var e=[],n=t.$refs.tableTrWrapper.querySelectorAll(".table-column"),o=0;o<n.length;o++)e.push(n[o].offsetWidth);t.$emit("colsWidth",e)})},minWidth:function(t){if(t)return{"min-width":t+"px"}},rowClick:function(){this.$emit("rowClick",this.row)}},watch:{columns:function(){this.isLastRow&&this.getCellsWidth()}}}},5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{prop:{default:null,type:String},label:{default:null,type:String},align:{default:null,type:String},width:{default:null,type:String},sortable:{default:!1,type:Boolean},fixed:{default:!1,type:Boolean},formatter:{default:function(t){return t},type:Function}}}},6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(13),r=(o=i)&&o.__esModule?o:{default:o};e.default={name:"snb-table-header",components:{TableContent:r.default},props:{columns:{type:Array,default:function(){return[]}},colsWidth:{type:Array,default:function(){return[]}},distanX:{type:Number,default:0},defaultSort:{type:Object,default:function(){}},sortState:{type:Object,default:function(){}}},data:function(){return{hasFixedCell:!1,tableWrapperWidth:0,sort:{prop:"",order:"",defaultProp:""},rows:[],panes:[]}},computed:{leftColumnWidth:function(){return this.colsWidth.length&&1*this.colsWidth[0]||0}},created:function(){this.sort.prop=this.defaultSort?this.defaultSort.prop:"",this.sort.order=this.defaultSort?this.defaultSort.order:"",this.sort.defaultProp=this.defaultSort?this.defaultSort.prop:""},mounted:function(){this.reductionColumns(this.columns)},methods:{reductionColumns:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[],n=null;t&&t.length&&(t.map(function(t){t.fixed&&!n?n=t||{}:e.push(t)}),n&&e.unshift(n)),this.hasFixedCell=!!n},handleHeadSortClick:function(t){this.sort.prop!==t.prop?(this.sort.prop=t.prop,this.sort.order="desc"):this.sort.order=this.sort.order||"desc",this.$emit("sortChange",this.sort)},setHeaderColsWidth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$emit("headerColsWidth",t)}},watch:{columns:function(t){this.reductionColumns(t)},sortState:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sort.order=t.order||this.defaultSort.order||""}}}},7:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",{ref:"elColumn",class:[t.column.align?"is-"+t.column.align:"",t.isAscending?"ascending":"",t.isDescending?"descending":""],on:{click:t.handleClick}},[n("div",{staticClass:"cell"},[t._v(t._s(t.column.label)+" "),t.isSortCell?n("span",{staticClass:"caret-wrapper"},[n("i",{staticClass:"sort-caret ascending"}),n("i",{staticClass:"sort-caret descending"})]):t._e()])])},i=[]},8:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{ref:"tableTrWrapper"},t._l(t.columns,function(e,o){return n("td",{key:e.type,class:["table-column",e.align?"is-"+e.align:"",0===o?"first-table-column":"",o===t.columns.length-1?"last-table-column":""],style:t.minWidth(e.width),on:{click:t.rowClick}},[n("TableCell",{attrs:{colspan:o,row:t.row,column:e}})],1)}))},i=[]},9:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"tableWrapper",staticClass:"table-wrapper"},[n("table",{ref:"tableContnt",style:{width:t.tableWidth+"px"},on:{touchstart:t.touchStartHandle,touchmove:t.touchMoveHandle,touchend:t.touchEndHandle,mousemove:t.mousemoveHandle,mouseup:t.mouseupHandle,mousedown:t.mousedownHandle,"webkit-transition-end":function(e){t.onTransitionEnd()},transitionend:function(e){t.onTransitionEnd()}}},[n("colgroup",t._l(t.colsWidth,function(t,e){return n("col",{key:e,attrs:{width:t}})})),t._v(" "),t.showHeader?n("thead",[n("tr",{ref:"tableTheaderWrapper"},t._l(t.panes,function(e,o){return n("table-column-header",{key:e.prop+o,class:["table-column",0===o?"first-table-column":"",o===t.panes.length-1?"last-table-column":""],attrs:{column:e,sort:t.sort},on:{handleHeadSortClick:t.handleHeadSortClick}})}))]):t._e(),t._v(" "),"header"!==t.contentType?n("tbody",t._l(t.rows,function(e,o){return n("table-row",{key:e.__vue_item_id,attrs:{row:e,columns:t.panes,isLastRow:o===t.rows.length-1},on:{colsWidth:t.setColsWidth,rowClick:t.rowClick}})})):t._e()])])},i=[]}})});